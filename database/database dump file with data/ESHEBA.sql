/*
 Navicat Premium Data Transfer

 Source Server         : e-sheba
 Source Server Type    : Oracle
 Source Server Version : 190000
 Source Host           : localhost:1521
 Source Schema         : ESHEBA

 Target Server Type    : Oracle
 Target Server Version : 190000
 File Encoding         : 65001

 Date: 25/02/2022 18:39:56
*/


-- ----------------------------
-- Table structure for ACCOUNT
-- ----------------------------
DROP TABLE "ESHEBA"."ACCOUNT";
CREATE TABLE "ESHEBA"."ACCOUNT" (
  "TRANSACTION_ID" NUMBER VISIBLE DEFAULT "ESHEBA"."ISEQ$$_77834".nextval NOT NULL,
  "DEBIT" NUMBER VISIBLE,
  "CREDIT" NUMBER VISIBLE,
  "CURRENT_AMOUNT" NUMBER VISIBLE,
  "PAYMENT_ID" NUMBER VISIBLE,
  "TRANS_DATE" DATE VISIBLE DEFAULT SYSDATE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of ACCOUNT
-- ----------------------------
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('21', '2250', '22600', '20350', '21', TO_DATE('2022-02-21 20:24:31', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('22', '750', '8700', '7950', '22', TO_DATE('2022-02-21 20:44:48', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('23', '1500', '4800', '3300', '23', TO_DATE('2022-02-21 20:53:11', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('61', '2730', '9575', '6845', '61', TO_DATE('2022-02-23 07:27:00', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('63', '3330', '4440', '1110', '63', TO_DATE('2022-02-23 07:27:03', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('64', '1800', '11460', '9660', '64', TO_DATE('2022-02-23 14:07:50', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('65', '3150', '7200', '4050', '65', TO_DATE('2022-02-25 15:45:31', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('84', '1020', '4960', '3940', '84', TO_DATE('2022-02-25 15:25:01', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('81', '1800', '11520', '9720', '81', TO_DATE('2022-02-25 15:03:09', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('82', '1500', '6840', '5340', '82', TO_DATE('2022-02-25 15:59:51', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('83', '2850', '5560', '2710', '83', TO_DATE('2022-02-25 15:59:55', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('3', '0', '1200', '1200', '4', TO_DATE('2022-02-19 22:47:35', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('4', '750', '3280', '2530', '5', TO_DATE('2022-02-19 23:12:39', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('66', '0', '2250', '2250', '66', TO_DATE('2022-02-23 14:04:34', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('67', '2400', '4460', '2060', '67', TO_DATE('2022-02-25 15:17:51', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('2', '0', '2000', '2000', '3', TO_DATE('2022-02-19 22:47:35', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('41', '4680', '5620', '940', '41', TO_DATE('2022-02-23 01:12:00', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('62', '600', '800', '200', '62', TO_DATE('2022-02-23 01:12:04', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('85', '1530', '5640', '4110', '85', TO_DATE('2022-02-25 15:58:01', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."ACCOUNT" VALUES ('86', '4230', '5640', '1410', '86', TO_DATE('2022-02-25 15:59:25', 'SYYYY-MM-DD HH24:MI:SS'));

-- ----------------------------
-- Table structure for CART
-- ----------------------------
DROP TABLE "ESHEBA"."CART";
CREATE TABLE "ESHEBA"."CART" (
  "C_ID" NUMBER VISIBLE,
  "S_ID" NUMBER VISIBLE,
  "QUANTITY" NUMBER VISIBLE,
  "PRICE" NUMBER VISIBLE,
  "IMG" VARCHAR2(500 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of CART
-- ----------------------------

-- ----------------------------
-- Table structure for CATEGORY
-- ----------------------------
DROP TABLE "ESHEBA"."CATEGORY";
CREATE TABLE "ESHEBA"."CATEGORY" (
  "CATEGORY_ID" NUMBER VISIBLE DEFAULT "ESHEBA"."ISEQ$$_77815".nextval NOT NULL,
  "CATEGORY_NAME" VARCHAR2(50 BYTE) VISIBLE NOT NULL,
  "DESCRIPTION" VARCHAR2(500 BYTE) VISIBLE,
  "MODERATED_BY" NUMBER VISIBLE,
  "IMG" VARCHAR2(250 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of CATEGORY
-- ----------------------------
INSERT INTO "ESHEBA"."CATEGORY" VALUES ('1', 'AC_REPAIR', 'At Esheba you can hire expert AC repair service near you. Our professional Service Providers will give you the best AC repair service. From general inspection, to changing AC parts you can avail every AC related service within a few moments.', '24', 'https://5.imimg.com/data5/SELLER/Default/2021/2/OG/DV/SJ/14807926/ac-repair-service-500x500.jpg');
INSERT INTO "ESHEBA"."CATEGORY" VALUES ('2', 'PLUMBING AND SANITARY', 'All your Plumbing and Sanitary-related problems will be taken care of by Esheba marketplace. We have trusted professionals who are experts in fitting, installations, and drainage related issues.', '24', 'https://cdn.dribbble.com/users/2488992/screenshots/6349198/untitled-1.jpg');
INSERT INTO "ESHEBA"."CATEGORY" VALUES ('3', 'HOME CLEANING', 'This service will help you to clean your home and also help to remove deep stains. Our Service provider will use effective chemicals that will wash your home smoothly and neatly.', '41', 'https://cdn2.vectorstock.com/i/1000x1000/85/41/professional-home-cleaning-services-concept-vector-28988541.jpg');
INSERT INTO "ESHEBA"."CATEGORY" VALUES ('4', 'PAINTING SERVICE', 'Painting is more than just splashing paint on your walls. Thereâ€™s a lot of prior work that goes into painting, like sanding, filling putty, priming and so on. And this is something that a professional expert painter of Esheba will have expert knowledge about and experience in painting works.', '41', 'https://afreshlookhandyman.com/wp-content/uploads/2020/11/Painting-Services.jpg');

-- ----------------------------
-- Table structure for CUSTOMER
-- ----------------------------
DROP TABLE "ESHEBA"."CUSTOMER";
CREATE TABLE "ESHEBA"."CUSTOMER" (
  "CUSTOMER_ID" NUMBER VISIBLE DEFAULT "ESHEBA"."ISEQ$$_77805".nextval NOT NULL,
  "NAME" VARCHAR2(60 BYTE) VISIBLE NOT NULL,
  "EMAIL" VARCHAR2(40 BYTE) VISIBLE NOT NULL,
  "PASSWORD" VARCHAR2(500 BYTE) VISIBLE NOT NULL,
  "PHONE_NUMBER" VARCHAR2(20 BYTE) VISIBLE NOT NULL,
  "ADDRESS" VARCHAR2(250 BYTE) VISIBLE,
  "REG_DATE" DATE VISIBLE DEFAULT SYSDATE,
  "TOTAL_SERVICES_TAKEN" NUMBER VISIBLE,
  "TOKEN" VARCHAR2(200 BYTE) VISIBLE,
  "USER_TYPE" VARCHAR2(50 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of CUSTOMER
-- ----------------------------
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('26', 'Sajin Udoy', 'udoy1@gmail.com', '$2b$08$x6.lTWQZvbXiK8GDZOodI.KUY1XJ4i3nJNlaeEx6kdsfecHnG/qk.', '01521582030', 'Dhaka, Bangladesh', TO_DATE('2022-02-05 12:00:58', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('27', 'Nafis Karim', 'nafis@gmail.com', '$2b$08$tv.mdR3Rfz9ZLewxaWKXWOJZITb.020cexl6OMIEczgqILeKLpQhe', '01521384090', 'Baily Road, Dhaka', TO_DATE('2022-02-05 21:29:58', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('28', 'Abdullah Ar Rafi', 'rafi1@gmail.com', '$2b$08$CJ1cAHSLylSaGYOQVjC75ueMS5qUt.sNx3bziyLWVQX701.vMUxB6', '01521582479', 'Mugda, Dhaka, Bangladesh', TO_DATE('2022-02-05 22:09:01', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('62', 'Sajid Wasif', 'sajid@gmail.com', '$2b$08$YwwcnUBDzRg0kH1Yq/1tXOrGCC3kVXV19lZ80RhzlprLiCl28kCKK', '01531549030', 'Monipur, Mirpur, Dhaka', TO_DATE('2022-02-23 10:36:05', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('63', 'Noman Ahmed', 'noman@gmail.com', '$2b$08$KuG8Jinx5DG.xIj0GUHSoeJipUqVTFcw0L7c/w0U7ENt1BAfOhGtq', '01521582145', 'Dhaka, Bangladesh', TO_DATE('2022-02-23 10:41:03', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('61', 'Shahad Udoy', 'shahad@gmail.com', '$2b$08$9jnhoY5orb8gGoVCqcsDFeiS.XhOPJGRMxWl2sk8VQCBrhQnQi5xK', '01521582030', 'Mirpur, Dhaka, Bangladesh', TO_DATE('2022-02-23 07:20:04', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('82', 'Efaz Ahmed', 'efaz@gmail.com', '$2b$08$IZ9QZ6rs3JO4SCav0kxhEeXYZq7TiSiBHqJbDrnKyZA7XmwW404JW', '01521582030', 'Dhaka, Bangladesh', TO_DATE('2022-02-25 15:10:59', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('81', 'Mashrur Mozahed', 'mashrur@gmail.com', '$2b$08$CRP9LGV390a803TFysQmTOhLfGm8DuebzHzpd/KHAUhYlVqArTSl6', '01534572040', 'Shahbag, Dhaka', TO_DATE('2022-02-25 12:08:18', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('64', 'Hasan Masum', 'masum@gmail.com', '$2b$08$mWdyYOl4z3u/q7bLUj26w.NUZYkJ6/ycntT6L.bEoqjV7OQbanR.y', '01521582030', 'Dhaka, Bangladesh', TO_DATE('2022-02-23 14:02:13', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('41', 'Ehsanul Haque Adib', 'adib@gmail.com', '$2b$08$dVEeq8D2oHsRrMKi/65ECOl74PfXXRk7zo148lTGeST9F93bIqYHy', '01721582030', 'Rupnagar, Dhaka, Bangladesh', TO_DATE('2022-02-22 10:35:59', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('25', 'Azizur Rahman Anik', 'rahmananik43@gmail.com', '$2b$08$./vh6FuOYn/o6qa48mUlKunvJDUxN1p23Yd6lhG.eUCM2w/rofMJy', '01521582030', 'Dhaka, Bangladesh', TO_DATE('2022-02-04 20:14:11', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('83', 'Aziz Anik', 'anik123@gmail.com', '$2b$08$jK8cQwd9zqWGP7ySdUWj0OdMQkP9N8Cb6RLwqOUeRHW3d2VxMpd3W', '01954681607', 'Dhaka, Bangladesh', TO_DATE('2022-02-25 15:30:36', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');
INSERT INTO "ESHEBA"."CUSTOMER" VALUES ('84', 'Sakib Ahmed', 'sakib@gmail.com', '$2b$08$ONIMf5A4qf0.G/sNSXf9hOqhqmNyJdqaHCiFlZB/fewm3LG5E.HTu', '01521582030', 'Dhaka, Bangladesh', TO_DATE('2022-02-25 15:48:45', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'customer');

-- ----------------------------
-- Table structure for INCLUDED_IN
-- ----------------------------
DROP TABLE "ESHEBA"."INCLUDED_IN";
CREATE TABLE "ESHEBA"."INCLUDED_IN" (
  "SVC_ID" NUMBER VISIBLE NOT NULL,
  "ORDER_ID" NUMBER VISIBLE NOT NULL,
  "ORDER_STATUS" VARCHAR2(15 BYTE) VISIBLE,
  "PROVIDER_ID" NUMBER VISIBLE,
  "QUANTITY" NUMBER VISIBLE,
  "COST" NUMBER VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of INCLUDED_IN
-- ----------------------------
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('52', '43', 'PENDING', NULL, '3', '945');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('1', '21', 'COMPLETED', '28', '3', '3000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('46', '43', 'COMPLETED', '43', '2', '1020');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('43', '43', 'PENDING', NULL, '3', '500');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('44', '43', 'PENDING', NULL, '2', '800');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('1', '22', 'COMPLETED', '28', '3', '1000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '43', 'COMPLETED', '50', '2', '800');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('1', '23', 'COMPLETED', '28', '2', '1000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('46', '45', 'COMPLETED', '43', '2', '1020');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '45', 'COMPLETED', '44', '3', '800');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '46', 'COMPLETED', '44', '2', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('51', '46', 'PENDING', NULL, '2', '3000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('46', '46', 'PENDING', NULL, '3', '1020');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('22', '47', 'COMPLETED', '41', '3', '600');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '47', 'COMPLETED', '44', '2', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('51', '47', 'PENDING', NULL, '1', '3000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('45', '64', 'COMPLETED', '48', '2', '680');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '64', 'PENDING', NULL, '3', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('1', '61', 'PENDING', NULL, '2', '1000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('52', '61', 'PENDING', NULL, '2', '1260');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('46', '61', 'PENDING', NULL, '2', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('47', '61', 'PENDING', NULL, '1', '1000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '61', 'COMPLETED', '44', '2', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('22', '61', 'ACCEPTED', '41', '2', '600');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '62', 'COMPLETED', '44', '1', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('51', '62', 'PENDING', NULL, '1', '3000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('44', '62', 'PENDING', NULL, '1', '640');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('45', '62', 'COMPLETED', '49', '1', '800');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('46', '62', 'PENDING', NULL, '1', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('43', '63', 'PENDING', NULL, '1', '500');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('22', '63', 'COMPLETED', '41', '3', '600');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '63', 'COMPLETED', '44', '1', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('45', '63', 'COMPLETED', '49', '1', '800');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('52', '63', 'PENDING', NULL, '1', '1260');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('47', '48', 'PENDING', NULL, '3', '750');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('1', '13', 'COMPLETED', '28', '2', '1000');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('45', '49', 'COMPLETED', '48', '1', '800');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '49', 'COMPLETED', '44', '2', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('52', '49', 'PENDING', NULL, '1', '1260');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('2', '42', 'PENDING', NULL, '3', '700');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('45', '42', 'COMPLETED', '49', '4', '680');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '42', 'COMPLETED', '50', '1', '800');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '44', 'COMPLETED', '50', '1', '800');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '65', 'ACCEPTED', '44', '3', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('22', '65', 'COMPLETED', '41', '4', '510');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('48', '66', 'COMPLETED', '44', '3', '1200');
INSERT INTO "ESHEBA"."INCLUDED_IN" VALUES ('22', '66', 'COMPLETED', '42', '4', '510');

-- ----------------------------
-- Table structure for MODERATOR
-- ----------------------------
DROP TABLE "ESHEBA"."MODERATOR";
CREATE TABLE "ESHEBA"."MODERATOR" (
  "MODERATOR_ID" NUMBER VISIBLE DEFAULT "ESHEBA"."ISEQ$$_77830".nextval NOT NULL,
  "MODERATOR_NAME" VARCHAR2(40 BYTE) VISIBLE NOT NULL,
  "EMAIL" VARCHAR2(30 BYTE) VISIBLE NOT NULL,
  "PASSWORD" VARCHAR2(200 BYTE) VISIBLE NOT NULL,
  "PHONE_NO" VARCHAR2(20 BYTE) VISIBLE NOT NULL,
  "PRESENT_ADDRESS" VARCHAR2(100 BYTE) VISIBLE,
  "PERMANENT_ADDRESS" VARCHAR2(100 BYTE) VISIBLE,
  "SALARY" NUMBER VISIBLE,
  "BANK_ACCOUNT_NO" VARCHAR2(30 BYTE) VISIBLE,
  "HIRE_DATE" DATE VISIBLE DEFAULT SYSDATE,
  "END_DATE" DATE VISIBLE,
  "TOKEN" VARCHAR2(500 BYTE) VISIBLE,
  "USER_TYPE" VARCHAR2(30 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of MODERATOR
-- ----------------------------
INSERT INTO "ESHEBA"."MODERATOR" VALUES ('24', 'Asif Rayhan', 'rayhan@gmail.com', '$2b$08$jmLNz3GXUzUyfXGyyFc1FOOvCet57M6r4e5Mv2TWYjfl66Yv7OWOi', '01521582030', 'Dhaka, Bangladesh', 'Dhaka, Bangladesh', '10000', NULL, TO_DATE('2022-02-21 01:56:29', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'moderator');
INSERT INTO "ESHEBA"."MODERATOR" VALUES ('41', 'Tayef Saad', 'saad1@gmail.com', '$2b$08$mrgc0/xWtjB28pMQ1QJaju15BzkCt.uTUn4gbB0MXRzY8SO0EUb56', '01954843608', 'Mirpur, Dhaka, Bangladesh', 'Mirpur, Dhaka, Bangladesh', '10000', NULL, TO_DATE('2022-02-22 10:17:37', 'SYYYY-MM-DD HH24:MI:SS'), NULL, NULL, 'moderator');

-- ----------------------------
-- Table structure for OFFERS
-- ----------------------------
DROP TABLE "ESHEBA"."OFFERS";
CREATE TABLE "ESHEBA"."OFFERS" (
  "OFFER_ID" NUMBER VISIBLE NOT NULL,
  "SERVICE_ID" NUMBER VISIBLE NOT NULL,
  "OFFER_NAME" VARCHAR2(40 BYTE) VISIBLE,
  "DISCOUNT" NUMBER VISIBLE,
  "START_DATE" DATE VISIBLE DEFAULT SYSDATE,
  "END_DATE" DATE VISIBLE NOT NULL
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of OFFERS
-- ----------------------------
INSERT INTO "ESHEBA"."OFFERS" VALUES ('1', '44', 'FALGUN', '20', TO_DATE('2022-02-22 10:40:57', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-03-10 10:40:47', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."OFFERS" VALUES ('1', '48', 'FALGUN', '20', TO_DATE('2022-02-22 10:43:11', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-03-13 10:42:59', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."OFFERS" VALUES ('47', '22', 'Winter Dhamaka ', '15', TO_DATE('2022-02-25 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-27 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."OFFERS" VALUES ('49', '43', 'Winter Dhamaka ', '20', TO_DATE('2022-02-25 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-28 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'));
INSERT INTO "ESHEBA"."OFFERS" VALUES ('48', '52', 'Winter Dhamaka ', '15', TO_DATE('2022-02-25 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'), TO_DATE('2022-02-26 00:00:00', 'SYYYY-MM-DD HH24:MI:SS'));

-- ----------------------------
-- Table structure for ORDERS
-- ----------------------------
DROP TABLE "ESHEBA"."ORDERS";
CREATE TABLE "ESHEBA"."ORDERS" (
  "ORDER_ID" NUMBER VISIBLE DEFAULT "ESHEBA"."ISEQ$$_77821".nextval NOT NULL,
  "ORDER_DATE" DATE VISIBLE DEFAULT SYSDATE,
  "ORDER_ADDRESS" VARCHAR2(100 BYTE) VISIBLE NOT NULL,
  "ORDER_NOTES" VARCHAR2(500 BYTE) VISIBLE,
  "ORDER_STATUS" VARCHAR2(20 BYTE) VISIBLE,
  "C_ID" NUMBER VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of ORDERS
-- ----------------------------
INSERT INTO "ESHEBA"."ORDERS" VALUES ('21', TO_DATE('2022-02-21 20:23:31', 'SYYYY-MM-DD HH24:MI:SS'), 'dhaka', 'asdas', 'PENDING', '27');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('22', TO_DATE('2022-02-21 20:44:23', 'SYYYY-MM-DD HH24:MI:SS'), 'dhaka', 'no notes', 'PENDING', '27');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('23', TO_DATE('2022-02-21 20:53:00', 'SYYYY-MM-DD HH24:MI:SS'), 'FSDFSDF', 'SDFSD', 'PENDING', '27');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('43', TO_DATE('2022-02-23 01:01:08', 'SYYYY-MM-DD HH24:MI:SS'), 'Urgent ', 'Rupnagar, DHaka', 'PENDING', '41');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('45', TO_DATE('2022-02-23 07:22:04', 'SYYYY-MM-DD HH24:MI:SS'), '55/B Monipur, Mirpur-10, Dhaka', 'Come within 2 days please', 'COMPLETED', '61');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('46', TO_DATE('2022-02-23 10:37:42', 'SYYYY-MM-DD HH24:MI:SS'), 'Monipur, Mirpur, Dhaka', 'Come within this 3 days and call before coming', 'PENDING', '62');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('47', TO_DATE('2022-02-23 10:42:40', 'SYYYY-MM-DD HH24:MI:SS'), 'Mirpur, Dhaka', 'Urgent', 'PENDING', '63');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('64', TO_DATE('2022-02-25 15:14:42', 'SYYYY-MM-DD HH24:MI:SS'), 'Dhaka', 'Urgent service needed', 'PENDING', '82');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('2', TO_DATE('2022-02-16 12:57:15', 'SYYYY-MM-DD HH24:MI:SS'), 'Mirpur, Dhaka', 'Urgent order', 'pending', '1');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('3', TO_DATE('2022-02-16 13:05:08', 'SYYYY-MM-DD HH24:MI:SS'), 'Manik Nagar, Dhaka', 'Urgent order', 'pending', '28');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('61', TO_DATE('2022-02-25 12:01:24', 'SYYYY-MM-DD HH24:MI:SS'), 'Dhaka', 'Need the water meter service urgently', 'PENDING', '64');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('62', TO_DATE('2022-02-25 12:07:06', 'SYYYY-MM-DD HH24:MI:SS'), 'Dhaka', 'Want to give a customize design for Attractive Design Painting Service', 'PENDING', '27');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('63', TO_DATE('2022-02-25 12:09:25', 'SYYYY-MM-DD HH24:MI:SS'), 'Shahbag, Dhaka', 'No notes', 'PENDING', '81');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('1', TO_DATE('2022-02-10 21:15:45', 'SYYYY-MM-DD HH24:MI:SS'), 'Dhaka', 'nothing', 'pending', '1');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('12', TO_DATE('2022-02-16 14:44:11', 'SYYYY-MM-DD HH24:MI:SS'), 'DHAKA', 'NO NOTES', 'PENDING', '27');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('13', TO_DATE('2022-02-16 16:22:46', 'SYYYY-MM-DD HH24:MI:SS'), 'Mugda, Dhaka', 'Urgent services needed within 3 days', 'PENDING', '28');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('48', TO_DATE('2022-02-23 14:04:34', 'SYYYY-MM-DD HH24:MI:SS'), 'dhaka', 'nothing', 'PENDING', '64');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('49', TO_DATE('2022-02-23 14:07:14', 'SYYYY-MM-DD HH24:MI:SS'), 'Dhaka', 'Call before coming', 'PENDING', '41');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('65', TO_DATE('2022-02-25 15:34:52', 'SYYYY-MM-DD HH24:MI:SS'), 'Manik Nagar, Dhaka', 'Currently ordered services', 'PENDING', '83');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('42', TO_DATE('2022-02-22 11:42:45', 'SYYYY-MM-DD HH24:MI:SS'), 'DHaka', 'Nothing', 'PENDING', '41');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('44', TO_DATE('2022-02-23 01:10:03', 'SYYYY-MM-DD HH24:MI:SS'), 'Dhaka', 'fsdfsd', 'COMPLETED', '27');
INSERT INTO "ESHEBA"."ORDERS" VALUES ('66', TO_DATE('2022-02-25 15:52:43', 'SYYYY-MM-DD HH24:MI:SS'), 'Mugda, Dhaka', 'Currently added attractive design painting and water meter servicing', 'COMPLETED', '84');

-- ----------------------------
-- Table structure for PAYMENT_INFO
-- ----------------------------
DROP TABLE "ESHEBA"."PAYMENT_INFO";
CREATE TABLE "ESHEBA"."PAYMENT_INFO" (
  "PAYMENT_ID" NUMBER VISIBLE DEFAULT "ESHEBA"."ISEQ$$_77824".nextval NOT NULL,
  "ORDER_ID" NUMBER VISIBLE,
  "AMOUNT" NUMBER VISIBLE NOT NULL,
  "METHOD" VARCHAR2(20 BYTE) VISIBLE NOT NULL,
  "TRANSACTION_ID" VARCHAR2(30 BYTE) VISIBLE,
  "PAY_PHONE" VARCHAR2(20 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of PAYMENT_INFO
-- ----------------------------
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('21', '21', '22600', 'BKASH', '9B74LBPW23', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('22', '22', '8700', 'ROCKET', 'fsadfsdaf', '01954843608');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('23', '23', '4800', 'BKASH', 'SDFGFD', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('61', '43', '9575', 'BKASH', '45fgdfs', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('63', '45', '4440', 'BKASH', '12HASD4', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('64', '46', '11460', 'BKASH', 'SDF45A64', '01954843608');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('65', '47', '7200', 'BKASH', '465FSDF', '01954843608');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('84', '64', '4960', 'BKASH', 'fa41234df', '01954843608');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('81', '61', '11520', 'BKASH', '12w4hr5a', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('82', '62', '6840', 'BKASH', 'KFESRT15', '01954843608');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('83', '63', '5560', 'BKASH', '345FASKJH', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('4', '12', '1200', 'BKASH', '132423', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('5', '13', '3280', 'BKASH', '9B74LBPWHI', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('66', '48', '2250', 'BKASH', 'sdfsdf', '01954843608');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('67', '49', '4460', 'ROCKET', 'asdsadfs', '01954843608');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('1', '1', '1000', 'BKASH', '132342', NULL);
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('3', '2', '2000', 'BKASH', '332342', NULL);
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('41', '42', '5620', 'BKASH', 'fsdfsdf', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('62', '44', '800', 'BKASH', 'gfdgds', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('85', '65', '5640', 'BKASH', '343gfAFSDJK', '01521582030');
INSERT INTO "ESHEBA"."PAYMENT_INFO" VALUES ('86', '66', '5640', 'BKASH', '4521sdfsd', '01954843608');

-- ----------------------------
-- Table structure for RATINGS
-- ----------------------------
DROP TABLE "ESHEBA"."RATINGS";
CREATE TABLE "ESHEBA"."RATINGS" (
  "REVIEW_ID" NUMBER VISIBLE NOT NULL,
  "STAR" NUMBER VISIBLE,
  "COMMENTS" VARCHAR2(600 BYTE) VISIBLE,
  "C_ID" NUMBER VISIBLE,
  "CAT_ID" NUMBER VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of RATINGS
-- ----------------------------
INSERT INTO "ESHEBA"."RATINGS" VALUES ('7', '5', 'Test comment', '41', '1');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('1', '4', 'Good enough', NULL, '1');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('2', '5', 'they have great skills', NULL, '1');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('3', '5', 'satisfied', '28', '1');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('4', '5', 'Good', '28', '1');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('5', '4', 'Test Comment', '28', '1');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('6', '4', 'test comment', '28', '1');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('8', '5', 'They are awesome!', '61', '3');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('9', '5', 'They are expert in designing ', '61', '4');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('10', '4', 'fdsdf', '41', '4');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('11', '4', 'good', '41', '3');
INSERT INTO "ESHEBA"."RATINGS" VALUES ('12', '5', 'They are awesome', '84', '4');

-- ----------------------------
-- Table structure for SERVICE
-- ----------------------------
DROP TABLE "ESHEBA"."SERVICE";
CREATE TABLE "ESHEBA"."SERVICE" (
  "SERVICE_ID" NUMBER VISIBLE DEFAULT "ESHEBA"."ISEQ$$_77818".nextval NOT NULL,
  "SERVICE_NAME" VARCHAR2(100 BYTE) VISIBLE NOT NULL,
  "DESCRIPTION" VARCHAR2(500 BYTE) VISIBLE,
  "COST" NUMBER VISIBLE NOT NULL,
  "CATEGORY_ID" NUMBER VISIBLE,
  "IMG" VARCHAR2(500 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of SERVICE
-- ----------------------------
INSERT INTO "ESHEBA"."SERVICE" VALUES ('1', 'AC REPAIR MASTER SERVICE', 'Indoor & outdoor unit detailed cleaning.
Complete AC servicing and problem fixing.', '1000', '1', 'https://i.pinimg.com/originals/9b/a5/53/9ba55346790b7b08e0894bdeec092ba4.jpg');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('2', 'AC BASIC REPAIR SERVICE', 'Test and identify problems by an expert AC technician.
AC filter, blower fan and panel cleaning.', '700', '1', 'https://us.123rf.com/450wm/pikepicture/pikepicture1711/pikepicture171100148/89461139-air-conditioner-repair-worker-vector-young-happy-male-technician-gesturing-isolated-flat-cartoon-cha.jpg');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('22', 'Water Meter Servicing', 'Repair and maintenance
Installation, repair and maintenance', '600', '2', 'https://assuredautomation.com/D10/D10-water-meter-register-face.jpg');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('45', 'BASIC HOME CLEANING', 'You can avail home common space clean by professional cleaner.
Cleaner will provide service upto the mark', '800', '3', 'https://www.kindpng.com/picc/m/56-562803_house-cleaning-services-house-cleaning-hd-png-download.png');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('43', 'PLUMBING BASIC SERVICE', 'This service includes only problem identification and repairing.
Background checked professional plumbers', '500', '2', 'https://www.vhv.rs/dpng/d/126-1261815_transparent-plumber-clipart-plumber-clipart-hd-png-download.png');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('44', 'SINK REPAIR SERVICE', 'Installation & repairing
Blockage removal', '800', '2', 'https://images.vector-images.com/clp5/180394/clp4095859.jpg');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('46', 'OFFICE ROOMS CLEANING', 'You can avail Office common space clean by professional cleaner. Cleaner will provide service upto the mark', '1200', '3', 'https://i.pinimg.com/736x/2b/a4/25/2ba425049503b015aaca84987743a861.jpg');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('47', 'BASIC ROOM PAINTING', 'nterior Wall Painting Service for home & commercial space. Long lasting plastic paint for home/commercial use with branded materials (Putty, sealer etc.)', '1000', '4', 'https://www.homeglazer.com/wp-content/uploads/2020/05/thumnail-4.png');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('48', 'ATTRACTIVE DESIGN PAINTING', 'Attractive and Luxury Silk Paint for home/commercial use with expert finish and branded materials (Putty, sealer etc.)', '1500', '4', 'https://www.homeglazer.com/wp-content/uploads/2021/09/1-27.png');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('51', 'EXTERIOR PAINTING', 'Exterior wall painting for residential & commercial space.
From touching up trim to full home convenient painting', '3000', '4', 'https://cdn.pixabay.com/photo/2015/11/03/08/56/service-1019821_1280.jpg');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('52', 'Kitchen Cleaning Service', 'Oil removal Procedure. No Machine will be used. Usage of deep cleaning chemicals', '1260', '3', 'https://cdn5.vectorstock.com/i/1000x1000/44/89/flat-cleaning-service-poster-vector-23274489.jpg');
INSERT INTO "ESHEBA"."SERVICE" VALUES ('86', 'Test Service Plumbin', 'This is a test description ....', '800', '2', 'https://i.pinimg.com/736x/f5/52/fa/f552fa026e97b0c27781b09ea23c30a7.jpg');

-- ----------------------------
-- Table structure for SERVICE_PROVIDER
-- ----------------------------
DROP TABLE "ESHEBA"."SERVICE_PROVIDER";
CREATE TABLE "ESHEBA"."SERVICE_PROVIDER" (
  "PROVIDER_ID" NUMBER VISIBLE DEFAULT "ESHEBA"."ISEQ$$_77809".nextval NOT NULL,
  "NAME" VARCHAR2(40 BYTE) VISIBLE NOT NULL,
  "EMAIL" VARCHAR2(40 BYTE) VISIBLE NOT NULL,
  "PASSWORD" VARCHAR2(500 BYTE) VISIBLE NOT NULL,
  "PHONE_NUMBER" VARCHAR2(20 BYTE) VISIBLE NOT NULL,
  "REG_DATE" DATE VISIBLE DEFAULT SYSDATE,
  "INCOME" NUMBER VISIBLE,
  "LICENCE_ID" VARCHAR2(40 BYTE) VISIBLE,
  "PROVIDES" NUMBER VISIBLE,
  "TOKEN" VARCHAR2(500 BYTE) VISIBLE,
  "USER_TYPE" VARCHAR2(50 BYTE) VISIBLE
)
LOGGING
NOCOMPRESS
PCTFREE 10
INITRANS 1
STORAGE (
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1
  MAXEXTENTS 2147483645
  BUFFER_POOL DEFAULT
)
PARALLEL 1
NOCACHE
DISABLE ROW MOVEMENT
;

-- ----------------------------
-- Records of SERVICE_PROVIDER
-- ----------------------------
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('28', 'Iftekhar Fahim', 'iftfahim@gmail.com', '$2b$08$0eYki6iyLDmK99TyLS8BWeEaSSKLLb6itiU4n/caH3zbOyWqXev06', '01521582030', TO_DATE('2022-02-11 21:55:20', 'SYYYY-MM-DD HH24:MI:SS'), '5250', '1343', '1', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('51', 'Nakib Hasan', 'nakib@gmail.com', '$2b$08$rxsdW8RFrXae4PwxUeyCO.ot7QKvA9YdKyTO1A0l17pXbJZAvKSwy', '017521682090', TO_DATE('2022-02-23 08:06:15', 'SYYYY-MM-DD HH24:MI:SS'), NULL, '6134', '52', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('52', 'Kamruzzaman Sheam', 'sheam@gmail.com', '$2b$08$x0P3v6oh0SHTmHsWS9XO8.tHUljWtz9ZxBMc7Xx/yXFggcg17c9iu', '01564584060', TO_DATE('2022-02-23 08:08:52', 'SYYYY-MM-DD HH24:MI:SS'), NULL, '1356', '51', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('53', 'Sajin Ahmed Udoy', 'udoy@gmail.com', '$2b$08$rl3Ck0RzYGAT9hTSEB9s5eMiHTDbcpNor9tYczTRkr4AEXsyUy7.S', '01321582040', TO_DATE('2022-02-23 08:10:26', 'SYYYY-MM-DD HH24:MI:SS'), NULL, '3346', '2', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('42', 'Kowser Mahmud Pappu', 'pappu123@gmail.com', '$2b$08$VZQ6YW5XU2IGdMbHuASGgOye7iGvQWVOUDSGo2wywRgHsf4t83emO', '01521482030', TO_DATE('2022-02-22 10:22:19', 'SYYYY-MM-DD HH24:MI:SS'), '1530', '3172', '22', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('41', 'Farhan Tanvir', 'farhan@gmail.com', '$2b$08$ffyrudPklMztS/Iqbq9x4e/ZWtmEq4nsWF0zm/B4MIw5nRNGd5Jvu', '01754840738', TO_DATE('2022-02-22 10:20:00', 'SYYYY-MM-DD HH24:MI:SS'), '4230', '1297', '22', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('43', 'Sultanul Arifin Nasif', 'nasif@gmail.com', '$2b$08$hE4lZsVriInPHJ3jiW1CDO/OYqUs4qkv6g11Cw5kvKRJWDU/puzTW', '01521483020', TO_DATE('2022-02-22 10:24:16', 'SYYYY-MM-DD HH24:MI:SS'), '3060', '1111', '46', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NDMsImlhdCI6MTY0NTU3OTU3OH0.gohS8WdTu22od5I07MIgf5uKHSQ72Ohqvq_AqFI98_A', 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('44', 'Shahrukh Islam Abir', 'abir@gmail.com', '$2b$08$LcuEXp9J/Onm3rYVT5xGT.zjRH.k7XAPlmGD2yfVg//bwuMY6NwRC', '01954743048', TO_DATE('2022-02-22 10:26:22', 'SYYYY-MM-DD HH24:MI:SS'), '13500', '32453', '48', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('45', 'Shahriar Fahim', 'shahriar@gmail.com', '$2b$08$NSWN90MKCToJSO6BwSI/Tu5erANH5FafBqKsXCn3UQoUSTETHsIL2', '01521697030', TO_DATE('2022-02-22 10:27:32', 'SYYYY-MM-DD HH24:MI:SS'), NULL, '3133', '47', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('46', 'Sanju Basak', 'sanju@gmail.com', '$2b$08$VgeAJOMxGAD6AIG0b1Hxa.1poXQsmmnA2jsFz1GIFPs3EmG6Ptuge', '01954243608', TO_DATE('2022-02-22 10:28:55', 'SYYYY-MM-DD HH24:MI:SS'), NULL, '7891', '43', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('47', 'Rifat Arefin Mahim', 'mahim@gmail.com', '$2b$08$Z8gYqCwP84MLXNPkADe9WeVR2s7.f7R.AGaCLO7MXPNwwijRoAEUW', '01823377068', TO_DATE('2022-02-22 10:29:56', 'SYYYY-MM-DD HH24:MI:SS'), NULL, '2542', '44', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('48', 'Reduan Raihan', 'raihan@gmail.com', '$2b$08$G1fAAeN5GqWijFMd5PdlUuGca1ysQ8E/CFp.s/kPTefnW1bYZEpEW', '01547523020', TO_DATE('2022-02-22 10:31:56', 'SYYYY-MM-DD HH24:MI:SS'), '1620', '3075', '45', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('49', 'Rahul Saha', 'rahul@gmail.com', '$2b$08$uoGfrjor2auEfn3KMIQWVOJy0lb8N3kkHrWWmGEaF3LnHHpTc0YT6', '01521976040', TO_DATE('2022-02-22 10:33:10', 'SYYYY-MM-DD HH24:MI:SS'), '5280', '6743', '45', NULL, 'provider');
INSERT INTO "ESHEBA"."SERVICE_PROVIDER" VALUES ('50', 'Akibur Rahman', 'akib@gmail.com', '$2b$08$gRL396FDSsnTZK2C75eTye9/Z4CTsP33uXpi08Jz3Jjlf.zRJJHbq', '01695487602', TO_DATE('2022-02-22 10:33:57', 'SYYYY-MM-DD HH24:MI:SS'), '2400', '5564', '48', NULL, 'provider');

-- ----------------------------
-- Function structure for ALLOCATE_EMPLOYEES
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "ESHEBA"."ALLOCATE_EMPLOYEES" AS
BEGIN 

FOR R IN (SELECT E.EMPLOYEE_ID AS EID, C.CHOICE AS CHOICE , E.HIRE_DATE AS HIRE_DATE, E.DEPARTMENT_ID AS DID , L.LIMIT AS LIMIT 
FROM EMPLOYEES E JOIN OPTIONS C ON (E.EMPLOYEE_ID = C.EMPLOYEE_ID)
LEFT JOIN LIMITS L ON (E.DEPARTMENT_ID = L.DEPARTMENT_ID)
ORDER BY C.CHOICE, E.HIRE_DATE)

LOOP 

SELECT COUNT(*) INTO LIM FROM LIMITS WHERE LIMITS.DEPARTMENT_ID = R.DID;

IF LIM = 0 THEN 
SELECT COUNT(*) INTO ID FROM EMPLOYEE_DEPARTMENT WHERE EMOLOYEE_ID = R.EID;
IF ID = 0 THEN 
INSERT INTO EMPLOYEE_DEPARTMENT VALUES (R.EID, R.DID);
END IF;

ELSE
SELECT LIMIT INTO LIM2 FROM LIMITS2 WHERE LIMITS2.DEPARTMENT_ID = R.DID;
IF LIM2 <= LIM THEN 
SELECT COUNT(*) INTO ID FROM EMPLOYEE_DEPARTMENT WHERE EMPLOYEE_ID = R.EID;
IF ID = 0 THEN 
INSERT INTO EMPLOYEE_DEPARTMENT VALUES(R.EID, R.DID);
SELECT LIMIT INTO LIM3 FROM LIMITS2 WHERE LIMITS2.DEPARTMENT_ID = R.DID;
LIM3 := LIM3 + 1; 
UPDATE LIMITS2 SET LIMIT = LIM3 WHERE LIMITS2.DEPARTMENT_ID = R.DID;

END IF;
END IF;
END IF;

END LOOP;

END;
/

-- ----------------------------
-- Function structure for ASSIGN_ORDER
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "ESHEBA"."ASSIGN_ORDER" AS
BEGIN
DBMS_OUTPUT.PUT_LINE(PID);
	SELECT
		COUNT( * ) INTO CNT 
	FROM
		INCLUDED_IN 
	WHERE
		SVC_ID = SID 
		AND ORDER_ID = OID 
		AND ORDER_STATUS = 'PENDING';
	IF
		CNT > 0 THEN
			UPDATE INCLUDED_IN 
			SET ORDER_STATUS = 'ACCEPTED', PROVIDER_ID = PID
		WHERE
			SVC_ID = SID 
			AND ORDER_ID = OID;
		
	END IF;
END;
/

-- ----------------------------
-- Function structure for CREATE_CART
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "ESHEBA"."CREATE_CART" AS
BEGIN
		TEMP_PRICE := 0;
	SELECT
		COUNT( * ) INTO CNT 
	FROM
		OFFERS 
	WHERE
		OFFERS.SERVICE_ID = SID AND OFFERS.END_DATE > SYSDATE;
	IF
		CNT > 0 THEN
		SELECT
			( S.COST - S.COST * ( O.DISCOUNT / 100 ) ) INTO TEMP_PRICE 
		FROM
			SERVICE S
			JOIN OFFERS O ON ( S.SERVICE_ID = O.SERVICE_ID ) 
		WHERE
			O.SERVICE_ID = SID;
		ELSE SELECT
			COST INTO TEMP_PRICE 
		FROM
			SERVICE 
		WHERE
			SERVICE_ID = SID;
		
	END IF;

INSERT INTO CART (S_ID, C_ID, QUANTITY, PRICE, IMG) VALUES(SID, CID, QUAN, TEMP_PRICE, IMG);
END;
/

-- ----------------------------
-- Function structure for DELETE_OFFER
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "ESHEBA"."DELETE_OFFER" AS
BEGIN
DELETE FROM OFFERS WHERE OFFERS.END_DATE < SYSDATE;
END;
/

-- ----------------------------
-- Function structure for INSERT_ORDERS
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "ESHEBA"."INSERT_ORDERS" AS
BEGIN 

OID := ORDER_SEQ.NEXTVAL;

INSERT INTO ORDERS(ORDER_ID, ORDER_ADDRESS, ORDER_NOTES, ORDER_STATUS, C_ID)
VALUES(OID, ADDRESS, NOTES, 'PENDING', CID);

INSERT INTO PAYMENT_INFO(ORDER_ID, AMOUNT, METHOD, TRANSACTION_ID, PAY_PHONE) VALUES(OID, U_AMOUNT, U_METHOD, U_TRANSACTION_ID, U_PAY_PHONE);

END;
/

-- ----------------------------
-- Function structure for UPDATE_ORDER_STATUS
-- ----------------------------
CREATE OR REPLACE
PROCEDURE "ESHEBA"."UPDATE_ORDER_STATUS" AS
BEGIN 

SELECT COUNT(*) INTO CNT FROM INCLUDED_IN WHERE ORDER_ID = OID AND ORDER_STATUS='COMPLETED';
SELECT COUNT(*) INTO CNT_ALL FROM INCLUDED_IN WHERE ORDER_ID = OID;

IF CNT = CNT_ALL THEN 
UPDATE ORDERS SET ORDERS.ORDER_STATUS = 'COMPLETED' WHERE ORDER_ID = OID;
END IF;

END;
/

-- ----------------------------
-- Sequence structure for ISEQ$$_77805
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77805";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77805" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_77809
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77809";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77809" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_77815
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77815";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77815" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_77818
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77818";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77818" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_77821
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77821";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77821" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_77824
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77824";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77824" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_77827
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77827";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77827" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_77830
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77830";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77830" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ISEQ$$_77834
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ISEQ$$_77834";
CREATE SEQUENCE "ESHEBA"."ISEQ$$_77834" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for OFFER_SEQ
-- ----------------------------
DROP SEQUENCE "ESHEBA"."OFFER_SEQ";
CREATE SEQUENCE "ESHEBA"."OFFER_SEQ" MINVALUE 5 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for ORDER_SEQ
-- ----------------------------
DROP SEQUENCE "ESHEBA"."ORDER_SEQ";
CREATE SEQUENCE "ESHEBA"."ORDER_SEQ" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for PAYMENT_INFO_SEQ
-- ----------------------------
DROP SEQUENCE "ESHEBA"."PAYMENT_INFO_SEQ";
CREATE SEQUENCE "ESHEBA"."PAYMENT_INFO_SEQ" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Sequence structure for SEQ
-- ----------------------------
DROP SEQUENCE "ESHEBA"."SEQ";
CREATE SEQUENCE "ESHEBA"."SEQ" MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 CACHE 20;

-- ----------------------------
-- Primary Key structure for table ACCOUNT
-- ----------------------------
ALTER TABLE "ESHEBA"."ACCOUNT" ADD CONSTRAINT "ACCOUNT_PK" PRIMARY KEY ("TRANSACTION_ID");

-- ----------------------------
-- Checks structure for table ACCOUNT
-- ----------------------------
ALTER TABLE "ESHEBA"."ACCOUNT" ADD CONSTRAINT "SYS_C007964" CHECK ("TRANSACTION_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table CATEGORY
-- ----------------------------
ALTER TABLE "ESHEBA"."CATEGORY" ADD CONSTRAINT "CATEGORY_PK" PRIMARY KEY ("CATEGORY_ID");

-- ----------------------------
-- Checks structure for table CATEGORY
-- ----------------------------
ALTER TABLE "ESHEBA"."CATEGORY" ADD CONSTRAINT "SYS_C007933" CHECK ("CATEGORY_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."CATEGORY" ADD CONSTRAINT "SYS_C007934" CHECK ("CATEGORY_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table CUSTOMER
-- ----------------------------
ALTER TABLE "ESHEBA"."CUSTOMER" ADD CONSTRAINT "CUSTOMER_PK" PRIMARY KEY ("CUSTOMER_ID");

-- ----------------------------
-- Uniques structure for table CUSTOMER
-- ----------------------------
ALTER TABLE "ESHEBA"."CUSTOMER" ADD CONSTRAINT "SYS_C007923" UNIQUE ("EMAIL") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Checks structure for table CUSTOMER
-- ----------------------------
ALTER TABLE "ESHEBA"."CUSTOMER" ADD CONSTRAINT "SYS_C007917" CHECK ("CUSTOMER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."CUSTOMER" ADD CONSTRAINT "SYS_C007918" CHECK ("NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."CUSTOMER" ADD CONSTRAINT "SYS_C007919" CHECK ("EMAIL" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."CUSTOMER" ADD CONSTRAINT "SYS_C007920" CHECK ("PASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."CUSTOMER" ADD CONSTRAINT "SYS_C007921" CHECK ("PHONE_NUMBER" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table INCLUDED_IN
-- ----------------------------
ALTER TABLE "ESHEBA"."INCLUDED_IN" ADD CONSTRAINT "INCLUDED_IN_PK" PRIMARY KEY ("SVC_ID", "ORDER_ID");

-- ----------------------------
-- Triggers structure for table INCLUDED_IN
-- ----------------------------
CREATE TRIGGER "ESHEBA"."UPDATE_ACCOUNT_TRANSACTION" AFTER UPDATE ON "ESHEBA"."INCLUDED_IN" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW WHEN (NEW.ORDER_STATUS = 'COMPLETED') 
DECLARE
PID NUMBER;
OID NUMBER;
NEWDEB NUMBER;

BEGIN 

OID := :OLD.ORDER_ID;
NEWDEB := :OLD.COST*0.75*:OLD.QUANTITY;


SELECT PAYMENT_ID INTO PID FROM PAYMENT_INFO WHERE ORDER_ID = OID;

UPDATE ACCOUNT SET DEBIT = (DEBIT + NEWDEB) , CURRENT_AMOUNT = (CURRENT_AMOUNT - NEWDEB) , TRANS_DATE = SYSDATE
WHERE PAYMENT_ID = PID;

UPDATE SERVICE_PROVIDER SET INCOME = NVL(INCOME,0) + NEWDEB WHERE PROVIDER_ID = :OLD.PROVIDER_ID;

END;
/

-- ----------------------------
-- Primary Key structure for table MODERATOR
-- ----------------------------
ALTER TABLE "ESHEBA"."MODERATOR" ADD CONSTRAINT "MODERATOR_PK" PRIMARY KEY ("MODERATOR_ID");

-- ----------------------------
-- Uniques structure for table MODERATOR
-- ----------------------------
ALTER TABLE "ESHEBA"."MODERATOR" ADD CONSTRAINT "SYS_C007962" UNIQUE ("EMAIL") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Checks structure for table MODERATOR
-- ----------------------------
ALTER TABLE "ESHEBA"."MODERATOR" ADD CONSTRAINT "SYS_C007956" CHECK ("MODERATOR_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."MODERATOR" ADD CONSTRAINT "SYS_C007957" CHECK ("MODERATOR_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."MODERATOR" ADD CONSTRAINT "SYS_C007958" CHECK ("EMAIL" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."MODERATOR" ADD CONSTRAINT "SYS_C007959" CHECK ("PASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."MODERATOR" ADD CONSTRAINT "SYS_C007960" CHECK ("PHONE_NO" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table OFFERS
-- ----------------------------
ALTER TABLE "ESHEBA"."OFFERS" ADD CONSTRAINT "OFFERS_PK" PRIMARY KEY ("OFFER_ID", "SERVICE_ID");

-- ----------------------------
-- Checks structure for table OFFERS
-- ----------------------------
ALTER TABLE "ESHEBA"."OFFERS" ADD CONSTRAINT "SYS_C008025" CHECK ("END_DATE" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table OFFERS
-- ----------------------------
CREATE TRIGGER "ESHEBA"."UPDATE_CART_PRICE" AFTER DELETE ON "ESHEBA"."OFFERS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE 

NEW_COST NUMBER;
SID NUMBER;

BEGIN 

SID := :OLD.SERVICE_ID;
SELECT COST INTO NEW_COST FROM SERVICE WHERE SERVICE_ID = SID;
UPDATE CART SET PRICE = NEW_COST WHERE S_ID = SID;

END;
/
CREATE TRIGGER "ESHEBA"."UPDATE_OFFERED_PRICE_IN_CART" AFTER INSERT ON "ESHEBA"."OFFERS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE 
NEW_COST NUMBER;


BEGIN 

SELECT COST INTO NEW_COST FROM SERVICE WHERE SERVICE_ID = :NEW.SERVICE_ID; 
UPDATE CART SET PRICE = NEW_COST * (100-:NEW.DISCOUNT)/100 WHERE S_ID = :NEW.SERVICE_ID;

END;
/

-- ----------------------------
-- Primary Key structure for table ORDERS
-- ----------------------------
ALTER TABLE "ESHEBA"."ORDERS" ADD CONSTRAINT "SYS_C007945" PRIMARY KEY ("ORDER_ID");

-- ----------------------------
-- Checks structure for table ORDERS
-- ----------------------------
ALTER TABLE "ESHEBA"."ORDERS" ADD CONSTRAINT "SYS_C007943" CHECK ("ORDER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."ORDERS" ADD CONSTRAINT "SYS_C007944" CHECK ("ORDER_ADDRESS" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table ORDERS
-- ----------------------------
CREATE TRIGGER "ESHEBA"."DELETE_CUSTOMER_CART" AFTER INSERT ON "ESHEBA"."ORDERS" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE 

BEGIN 


FOR R IN (SELECT * FROM CART WHERE C_ID = :NEW.C_ID)

LOOP

INSERT INTO INCLUDED_IN(ORDER_ID, SVC_ID, ORDER_STATUS, QUANTITY, COST) VALUES (:NEW.ORDER_ID, R.S_ID, 'PENDING', R.QUANTITY, R.PRICE);

END LOOP;

DELETE FROM CART WHERE CART.C_ID = :NEW.C_ID;

END;
/

-- ----------------------------
-- Primary Key structure for table PAYMENT_INFO
-- ----------------------------
ALTER TABLE "ESHEBA"."PAYMENT_INFO" ADD CONSTRAINT "PAYMENT_INFO_PK" PRIMARY KEY ("PAYMENT_ID");

-- ----------------------------
-- Checks structure for table PAYMENT_INFO
-- ----------------------------
ALTER TABLE "ESHEBA"."PAYMENT_INFO" ADD CONSTRAINT "SYS_C007946" CHECK ("PAYMENT_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."PAYMENT_INFO" ADD CONSTRAINT "SYS_C007947" CHECK ("AMOUNT" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."PAYMENT_INFO" ADD CONSTRAINT "SYS_C007948" CHECK ("METHOD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Triggers structure for table PAYMENT_INFO
-- ----------------------------
CREATE TRIGGER "ESHEBA"."ACCOUNT_TRANSACTION" AFTER INSERT ON "ESHEBA"."PAYMENT_INFO" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW 
DECLARE 


BEGIN 

INSERT INTO ACCOUNT(DEBIT, CREDIT, CURRENT_AMOUNT, PAYMENT_ID) VALUES(0, :NEW.AMOUNT, :NEW.AMOUNT, :NEW.PAYMENT_ID);

END;
/

-- ----------------------------
-- Primary Key structure for table RATINGS
-- ----------------------------
ALTER TABLE "ESHEBA"."RATINGS" ADD CONSTRAINT "RATINGS_PK" PRIMARY KEY ("REVIEW_ID");

-- ----------------------------
-- Primary Key structure for table SERVICE
-- ----------------------------
ALTER TABLE "ESHEBA"."SERVICE" ADD CONSTRAINT "SERVICE_PK" PRIMARY KEY ("SERVICE_ID");

-- ----------------------------
-- Checks structure for table SERVICE
-- ----------------------------
ALTER TABLE "ESHEBA"."SERVICE" ADD CONSTRAINT "SYS_C007937" CHECK ("SERVICE_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."SERVICE" ADD CONSTRAINT "SYS_C007938" CHECK ("SERVICE_NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."SERVICE" ADD CONSTRAINT "SYS_C007939" CHECK ("COST" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Primary Key structure for table SERVICE_PROVIDER
-- ----------------------------
ALTER TABLE "ESHEBA"."SERVICE_PROVIDER" ADD CONSTRAINT "PROVIDER_PK" PRIMARY KEY ("PROVIDER_ID");

-- ----------------------------
-- Uniques structure for table SERVICE_PROVIDER
-- ----------------------------
ALTER TABLE "ESHEBA"."SERVICE_PROVIDER" ADD CONSTRAINT "SYS_C007930" UNIQUE ("EMAIL") NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Checks structure for table SERVICE_PROVIDER
-- ----------------------------
ALTER TABLE "ESHEBA"."SERVICE_PROVIDER" ADD CONSTRAINT "SYS_C007924" CHECK ("PROVIDER_ID" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."SERVICE_PROVIDER" ADD CONSTRAINT "SYS_C007925" CHECK ("NAME" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."SERVICE_PROVIDER" ADD CONSTRAINT "SYS_C007926" CHECK ("EMAIL" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."SERVICE_PROVIDER" ADD CONSTRAINT "SYS_C007927" CHECK ("PASSWORD" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."SERVICE_PROVIDER" ADD CONSTRAINT "SYS_C007928" CHECK ("PHONE_NUMBER" IS NOT NULL) NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table ACCOUNT
-- ----------------------------
ALTER TABLE "ESHEBA"."ACCOUNT" ADD CONSTRAINT "FK_PAYMENT" FOREIGN KEY ("PAYMENT_ID") REFERENCES "ESHEBA"."PAYMENT_INFO" ("PAYMENT_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table CART
-- ----------------------------
ALTER TABLE "ESHEBA"."CART" ADD CONSTRAINT "FK_CUS" FOREIGN KEY ("C_ID") REFERENCES "ESHEBA"."CUSTOMER" ("CUSTOMER_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."CART" ADD CONSTRAINT "FK_SER" FOREIGN KEY ("S_ID") REFERENCES "ESHEBA"."SERVICE" ("SERVICE_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table CATEGORY
-- ----------------------------
ALTER TABLE "ESHEBA"."CATEGORY" ADD CONSTRAINT "FK_MODERATES" FOREIGN KEY ("MODERATED_BY") REFERENCES "ESHEBA"."MODERATOR" ("MODERATOR_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table INCLUDED_IN
-- ----------------------------
ALTER TABLE "ESHEBA"."INCLUDED_IN" ADD CONSTRAINT "FK_INCLUDED_IN" FOREIGN KEY ("SVC_ID") REFERENCES "ESHEBA"."SERVICE" ("SERVICE_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."INCLUDED_IN" ADD CONSTRAINT "FK_INCLUDED_IN_2" FOREIGN KEY ("ORDER_ID") REFERENCES "ESHEBA"."ORDERS" ("ORDER_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."INCLUDED_IN" ADD CONSTRAINT "FK_PROVIDER_II" FOREIGN KEY ("PROVIDER_ID") REFERENCES "ESHEBA"."SERVICE_PROVIDER" ("PROVIDER_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table OFFERS
-- ----------------------------
ALTER TABLE "ESHEBA"."OFFERS" ADD CONSTRAINT "FK_SERVICE_OFFER" FOREIGN KEY ("SERVICE_ID") REFERENCES "ESHEBA"."SERVICE" ("SERVICE_ID") ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table PAYMENT_INFO
-- ----------------------------
ALTER TABLE "ESHEBA"."PAYMENT_INFO" ADD CONSTRAINT "FK_ORDER" FOREIGN KEY ("ORDER_ID") REFERENCES "ESHEBA"."ORDERS" ("ORDER_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table RATINGS
-- ----------------------------
ALTER TABLE "ESHEBA"."RATINGS" ADD CONSTRAINT "FK_CUSTOMER" FOREIGN KEY ("C_ID") REFERENCES "ESHEBA"."CUSTOMER" ("CUSTOMER_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
ALTER TABLE "ESHEBA"."RATINGS" ADD CONSTRAINT "FK_PROVIDER" FOREIGN KEY ("CAT_ID") REFERENCES "ESHEBA"."CATEGORY" ("CATEGORY_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table SERVICE
-- ----------------------------
ALTER TABLE "ESHEBA"."SERVICE" ADD CONSTRAINT "FK_CATEGORY" FOREIGN KEY ("CATEGORY_ID") REFERENCES "ESHEBA"."CATEGORY" ("CATEGORY_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;

-- ----------------------------
-- Foreign Keys structure for table SERVICE_PROVIDER
-- ----------------------------
ALTER TABLE "ESHEBA"."SERVICE_PROVIDER" ADD CONSTRAINT "FK_PROVIDES" FOREIGN KEY ("PROVIDES") REFERENCES "ESHEBA"."SERVICE" ("SERVICE_ID") ON DELETE SET NULL NOT DEFERRABLE INITIALLY IMMEDIATE NORELY VALIDATE;
